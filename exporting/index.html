<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.55">
<link rel="stylesheet" href="react-image-lightbox/style.css"><title data-react-helmet="true">Exporting Graphs | Joern Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Exporting Graphs | Joern Documentation"><meta data-react-helmet="true" name="description" content="Joern is used in academic research as a source for"><meta data-react-helmet="true" property="og:description" content="Joern is used in academic research as a source for"><meta data-react-helmet="true" property="og:url" content="https://docs.joern.io/exporting"><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap"><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link data-react-helmet="true" rel="shortcut icon" href="/img/website-icon.png"><link data-react-helmet="true" rel="canonical" href="https://docs.joern.io/exporting"><link rel="stylesheet" href="/styles.d76b5722.css">
<link rel="preload" href="/styles.63ef370e.js" as="script">
<link rel="preload" href="/runtime~main.a8443992.js" as="script">
<link rel="preload" href="/main.8f3d9bde.js" as="script">
<link rel="preload" href="/1.e1eda06e.js" as="script">
<link rel="preload" href="/39.dca14509.js" as="script">
<link rel="preload" href="/1be78505.90797e98.js" as="script">
<link rel="preload" href="/ec1ed54d.6e92f1ec.js" as="script">
<link rel="preload" href="/fc25a964.a02179bf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):(e.matches,t("dark"))}()</script><div id="__docusaurus">
<div class="main-wrapper"><div id="docs" class="docPage_1jis"><div id="sidebar"><div class="docSidebarContainer_1kjN"><div align="center" id="logo"><a href="https://joern.io"><img width="40%" src="/img/logo.svg"></a></div><div class="sidebar_25T_"><div class="menu menu_1e9D"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/home">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/quickstart">Quickstart</a></li><li class="menu__list-item"><a class="menu__link" href="/shell">Interactive Shell</a></li><li class="menu__list-item"><a class="menu__link" href="/interpreter">Interpreter</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/exporting">Exporting Graphs</a></li><li class="menu__list-item"><a class="menu__link" href="/server">Server</a></li><li class="menu__list-item"><a class="menu__link" href="/organizing-projects">Workspace</a></li><li class="menu__list-item"><a class="menu__link" href="/code-property-graph">Code Property Graph</a></li><li class="menu__list-item"><a class="menu__link" href="/traversal-basics">Traversal Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/c-syntaxtree">Syntax-Tree Queries</a></li><li class="menu__list-item"><a class="menu__link" href="/extensions">Extending Joern</a></li><li class="menu__list-item"><a class="menu__link" href="/glossary">Glossary</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CPGQL Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/reference-card">Reference Card</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/node-type-steps">Node-Type Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/filter-steps">Filter Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/core-steps">Core Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/repeat-steps">Repeat Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/complex-steps">Complex Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/execution-directives">Execution Directives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/augmentation-directives">Augmentation Directives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/help-directive">Help Directive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cpgql/calls">Calls</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/upgrade-guides">Upgrade guides</a></li></ul></div></div></div></div><div id="content-wrapper"><header><nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav></header><div class="docPage_1jis"><main class="docMainContainer_3j_A"><div class="container padding-vert--lg"><div class="row"><div class="col docItemCol_2AGf"><div class="docItemContainer_1tAC"><article><header><h1 class="docTitle_cWlf">Exporting Graphs</h1></header><div class="markdown"><p>Joern is used in academic research as a source for
intermediate graph representations of code, particularly in machine
learning and vulnerability discovery applications [e.g., <a href="#references">1,2,3,4,5</a>]. To support
this use-case, Joern provides both plotting capabilities in the
interactive console as well as the <code>joern-export</code> command line
utility.</p><p>In summary, Joern can create the following graph representations for
C/C++ code:</p><ul><li>Abstract Syntax Trees (AST)</li><li>Control Flow Graphs (CFG)</li><li>Control Dependence Graphs (CDG)</li><li>Data Dependence Graphs (DDG)</li><li>Program Dependence graphs (PDG)</li><li>Code Property Graphs
(<a href="https://www.sec.cs.tu-bs.de/pubs/2014-ieeesp.pdf">CPG14</a>)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-command-line-tool-joern-export"></a>The command line tool <code>joern-export</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-command-line-tool-joern-export" title="Direct link to heading">#</a></h2><p>All of these representations can be plotted and exported into the
graphviz dot format to enable processing with third party tools or via
external scripts.</p><p>To parse the code in <code>/src/directory</code> and dump Program Dependence
Graphs for all methods into the directory <code>outdir</code>, you can run the
following commands on the system shell:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">joern-parse /src/directory</span></div><div class="token-line" style="color:#393A34"><span class="token plain">joern-export --repr pdg --out outdir</span></div></div></div></div></div><p>For a complete overview of options, run <code>joern-export --help</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="plotting-and-exporting-on-the-joern-console"></a>Plotting and Exporting on the Joern Console<a aria-hidden="true" tabindex="-1" class="hash-link" href="#plotting-and-exporting-on-the-joern-console" title="Direct link to heading">#</a></h2><p>If you would like to explore graph representations interactively, you
can do so on the <a href="/joern/shell">Joern shell</a>. To this end, we define
the following steps on <code>method</code> nodes to dump representations in dot
format.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">cpg.method($name).dotAst.l // output AST in dot format</span></div><div class="token-line" style="color:#393A34"><span class="token plain">cpg.method($name).dotCfg.l // output CFG in dot format</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">cpg.method($name).dotCpg14.l // output CPG&#x27;14 in dot format</span></div></div></div></div></div><p>You can also plot and view representations using the following
queries:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">cpg.method($name).plotDotAst // plot AST</span></div><div class="token-line" style="color:#393A34"><span class="token plain">cpg.method($name).ploDotCfg // plot CFG</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">cpg.method($name).plotDotCpg14 // plot CPG&#x27;14</span></div></div></div></div></div><p>Note that the <code>ossdataflow</code> layer needs to have been calculated for
the source CPG via <code>run.ossdataflow</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="example"></a>Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#example" title="Direct link to heading">#</a></h3><p>Generate the CPG along with the data flow layer for a sample function
named <code>myfunc</code>.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">joern&gt; importCode.c.fromString( &quot;&quot;&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">           int myfunc(int b) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">             int a = 42;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">             if (b &gt; 10) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                foo(a)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">             }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">             bar(a);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">           }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">           &quot;&quot;&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">       ) </span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">joern&gt; run.ossdataflow</span></div></div></div></div></div><p>You can now plot the AST as follows:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">joern&gt; cpg.method(&quot;myfunc&quot;).plotDotAst </span></div></div></div></div></div><p>You can obtain the dot representation of the AST as well:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">joern&gt; cpg.method(&quot;myfunc&quot;).dotAst.l</span></div><div class="token-line" style="color:#393A34"><span class="token plain">res4: List[String] = List(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;&quot;&quot;digraph myfunc {  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000102&quot; [label = &quot;(METHOD,myfunc)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000103&quot; [label = &quot;(PARAM,int b)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000104&quot; [label = &quot;(BLOCK,,)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000105&quot; [label = &quot;(LOCAL,a: int)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000106&quot; [label = &quot;(&lt;operator&gt;.assignment,a = 42)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000107&quot; [label = &quot;(IDENTIFIER,a,a = 42)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000108&quot; [label = &quot;(LITERAL,42,a = 42)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000109&quot; [label = &quot;(CONTROL_STRUCTURE,if (b &gt; 10),if (b &gt; 10))&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000110&quot; [label = &quot;(&lt;operator&gt;.greaterThan,b &gt; 10)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000111&quot; [label = &quot;(IDENTIFIER,b,b &gt; 10)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000112&quot; [label = &quot;(LITERAL,10,b &gt; 10)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000113&quot; [label = &quot;(BLOCK,,)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000114&quot; [label = &quot;(bar,bar(a))&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000115&quot; [label = &quot;(IDENTIFIER,a,bar(a))&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;1000116&quot; [label = &quot;(METHOD_RETURN,int)&quot; ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000102&quot; -&gt; &quot;1000103&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000102&quot; -&gt; &quot;1000104&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000102&quot; -&gt; &quot;1000116&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000104&quot; -&gt; &quot;1000105&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000104&quot; -&gt; &quot;1000106&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000104&quot; -&gt; &quot;1000109&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000104&quot; -&gt; &quot;1000114&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000106&quot; -&gt; &quot;1000107&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000106&quot; -&gt; &quot;1000108&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000109&quot; -&gt; &quot;1000110&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000109&quot; -&gt; &quot;1000113&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000110&quot; -&gt; &quot;1000111&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000110&quot; -&gt; &quot;1000112&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;1000114&quot; -&gt; &quot;1000115&quot;  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">)</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dumping-representations-for-all-functions-from-the-shell"></a>Dumping representations for all functions from the shell<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dumping-representations-for-all-functions-from-the-shell" title="Direct link to heading">#</a></h2><p>You can also dump all representations into the directory <code>out</code> using</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">run.dumpast</span></div><div class="token-line" style="color:#393A34"><span class="token plain">run.dumpcfg</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">run.dumpcpg14</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="references"></a>References<a aria-hidden="true" tabindex="-1" class="hash-link" href="#references" title="Direct link to heading">#</a></h2><p>Research that employs Joern as an extraction tool for intermediate
representations of code:</p><p>(1) <a href="https://papers.nips.cc/paper/9209-devign-effective-vulnerability-identification-by-learning-comprehensive-program-semantics-via-graph-neural-networks.pdf">Devign: Effective Vulnerability Identification by Learning
Comprehensive Program Semantics via Graph Neural Networks, Zhou et al.,
NIPS&#x27;19</a></p><p>(2) <a href="https://www.cs.drexel.edu/~greenie/stylometry-esorics.pdf">Source Code Authorship Attribution using LongShort-Term Memory
Based Networks, Alsulami et al., ESORICS&#x27;17</a></p><p>(3)<a href="http://www.cs.utsa.edu/~shxu/socs/VulPecker.pdf">VulPecker: an automated vulnerability detection system based on
code similarity analysis, Li et al.,
ACSAC&#x27;16</a></p><p>(4) <a href="https://content.sciendo.com/view/journals/popets/2019/3/article-p389.xml?language=en">Git blame who?: Stylistic authorship attribution of small,
incomplete source code fragments, Dauber et al.,
PETS-19/3</a></p><p>(5) <a href="https://machiry.github.io/files/spider.pdf">SPIDER: Enabling Fast Patch Propagation In Related Software
Repositories, Machiry et al., S&amp;P&#x27;20</a></p></div></article></div></div><div class="col col--3"><div class="tableOfContents_tVyB"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-command-line-tool-joern-export" class="table-of-contents__link">The command line tool <code>joern-export</code></a></li><li><a href="#plotting-and-exporting-on-the-joern-console" class="table-of-contents__link">Plotting and Exporting on the Joern Console</a><ul><li><a href="#example" class="table-of-contents__link">Example</a></li></ul></li><li><a href="#dumping-representations-for-all-functions-from-the-shell" class="table-of-contents__link">Dumping representations for all functions from the shell</a></li><li><a href="#references" class="table-of-contents__link">References</a></li></ul></div></div></div></div></main></div></div><div id="right-spacer"></div></div></div></div>
<script src="/styles.63ef370e.js"></script>
<script src="/runtime~main.a8443992.js"></script>
<script src="/main.8f3d9bde.js"></script>
<script src="/1.e1eda06e.js"></script>
<script src="/39.dca14509.js"></script>
<script src="/1be78505.90797e98.js"></script>
<script src="/ec1ed54d.6e92f1ec.js"></script>
<script src="/fc25a964.a02179bf.js"></script>
</body>
</html>